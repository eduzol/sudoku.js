/*! sudoku 2015-01-25  eduzol _at _ gmail */
var VIEW=function(){var a={},b="",c=function(a){console.log("success ",a)},d=function(a,b,c,d){d||(d=" "),console.log("value "+d);var e=$("<span contenteditable='true'>&nbsp;</span>");$(".grid td[data-column='"+c+"'][data-row='"+b+"'][data-section='"+a+"']").empty().append(e)},e=function(a){console.log("failure ",a);var c=a.code;switch(c){case 0:console.log("column validation error "+a.column,$(".grid td[data-column='"+a.column+"']")),$(".grid td[data-column='"+a.column+"']").attr("bgcolor","yellow"),d(a.section,a.row,a.column,b)}},f=function(){$(this).children("span").focus()},g=function(a){var c=a.charCode,d=!1,e=$(this).children("span").text();if(c>=49&&57>=c&&(d=!0),!d)return void a.preventDefault();var f=$(this),g=f.attr("data-section"),h=f.attr("data-row"),i=f.attr("data-column"),e=parseInt($(this).children("span").text()),j=$.isNumeric(e);b=e;var k=String.fromCharCode(c);e&&j&&(console.log("enters if "),$(this).children("span").text("")),console.log("cell was clicked, section  "+g+" row "+h+" column "+i+" value "+k+" oldValue "+b,f),SUDOKU.setMove(g,i,h,k)};return a.init=function(){console.log("sudoku view  init "),SUDOKU.init({succesfulMove:c,failureMove:e,completed:c}),$(".grid td").click(f),$(".grid td").keypress(g)},$(document).ready(function(){console.log("init "),a.init()}),a}(),SUDOKU=function(){var a={},b=9,c=[],d=[],e=[],f={},g={},h={message:"success",value:""},i={code:0,message:"columnValidationError",value:""},j={code:1,message:"rowValidationError",value:""},k={code:2,message:"sectionValidationError",value:""},l={code:3,message:"invalidNumber",value:""},m=function(a,b){var d=c[a][b];return d?!1:!0},n=function(a,b){var c=d[a][b];return c?!1:!0},o=function(a,b){var c=e[a][b];return c?!1:!0},p=function(a){return a>0&&9>=a?!0:!1};return a.init=function(a){console.log("sudokulib init"),f=a.succesfulMove,onfailureMove=a.failureMove,g=a.completed;for(var h=0;b>=h;h++)c[h]=[],d[h]=[],e[h]=[]},a.setMove=function(a,b,g,q){if(!p(a))return l.value=a,void onfailureMove(l);if(!p(b))return l.value=b,void onfailureMove(l);if(!p(g))return l.value=g,void onfailureMove(l);var r=m(g,q);if(!r)return j.value=q,j.section=a,j.column=b,j.row=g,void onfailureMove(j);var s=n(b,q);if(!s)return i.value=q,i.section=a,i.column=b,i.row=g,void onfailureMove(i);var t=o(a,q);return t?void(r&&s&&t&&(c[g][q]=!0,d[b][q]=!0,e[a][q]=!0,h.value=q,h.section=a,h.column=b,h.row=g,f(h))):(k.value=q,k.section=a,k.column=b,k.row=g,void onfailureMove(k))},a}();